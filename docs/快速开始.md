# ğŸš€ ç™¾åº¦åœ°å›¾ API å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸ“‹ ç›®å½•

1. [éªŒè¯é›†æˆ](#1-éªŒè¯é›†æˆ)
2. [åŸºç¡€ä½¿ç”¨](#2-åŸºç¡€ä½¿ç”¨)
3. [å¸¸è§åœºæ™¯](#3-å¸¸è§åœºæ™¯)
4. [æ•…éšœæ’æŸ¥](#4-æ•…éšœæ’æŸ¥)

---

## 1. éªŒè¯é›†æˆ

### æ­¥éª¤ 1ï¼šæ£€æŸ¥ API Key

æ‰“å¼€ `index.html`ï¼Œç¡®è®¤ç™¾åº¦åœ°å›¾è„šæœ¬å·²åŠ è½½ï¼š

```html
<script type="text/javascript" src="https://api.map.baidu.com/api?v=3.0&ak=nsnFL3cWD3LiBc9MFnEADJlKU4ezNc6Y"></script>
```

### æ­¥éª¤ 2ï¼šå¯åŠ¨é¡¹ç›®

```bash
npm run dev
```

### æ­¥éª¤ 3ï¼šæ‰“å¼€æµè§ˆå™¨

è®¿é—® `http://localhost:5173`ï¼ŒæŸ¥çœ‹è§†é¢‘ç›‘æ§å¢™æ¨¡å—ã€‚

### æ­¥éª¤ 4ï¼šéªŒè¯åŠŸèƒ½

- âœ… é¡µé¢é¡¶éƒ¨æ˜¾ç¤ºå°åŒºæ ‡ç­¾ï¼ˆé˜³å…‰å°åŒºã€é‡‘åœ°èŠ±å›­ç­‰ï¼‰
- âœ… æ²¡æœ‰å‡ºç° "ç™¾åº¦åœ°å›¾ API æœªåŠ è½½" é”™è¯¯
- âœ… ç‚¹å‡»å°åŒºæ ‡ç­¾å¯ä»¥åˆ‡æ¢è§†é¢‘

å¦‚æœæ˜¾ç¤º "âš ï¸ é”™è¯¯ä¿¡æ¯"ï¼Œè¯´æ˜ API è°ƒç”¨å¤±è´¥ï¼Œç³»ç»Ÿå·²è‡ªåŠ¨ä½¿ç”¨å¤‡ç”¨æ•°æ®ã€‚

---

## 2. åŸºç¡€ä½¿ç”¨

### åœºæ™¯ Aï¼šåœ¨ç°æœ‰ç»„ä»¶ä¸­ä½¿ç”¨

```vue
<template>
  <div>
    <button @click="loadData">åŠ è½½å°åŒº</button>
    <ul>
      <li v-for="item in communities" :key="item.id">
        {{ item.name }} - {{ item.address }}
      </li>
    </ul>
  </div>
</template>

<script setup>
import { ref } from 'vue'
import { searchCommunities } from '@/services/baiduMapService'

const communities = ref([])

const loadData = async () => {
  try {
    communities.value = await searchCommunities({
      city: 'å®šå…´å¿',
      query: 'å°åŒº',
      pageSize: 10
    })
  } catch (error) {
    console.error('åŠ è½½å¤±è´¥', error)
  }
}
</script>
```

### åœºæ™¯ Bï¼šä¿®æ”¹æœç´¢åŸå¸‚

æ‰“å¼€ `src/components/VideoWall.vue`ï¼Œæ‰¾åˆ° `loadCommunities` å‡½æ•°ï¼š

```javascript
const loadCommunities = async () => {
  try {
    const result = await searchCommunities({
      city: 'åŒ—äº¬å¸‚',  // ğŸ‘ˆ ä¿®æ”¹è¿™é‡Œ
      query: 'å°åŒº',
      pageSize: 20
    })
    // ...
  } catch (err) {
    // ...
  }
}
```

### åœºæ™¯ Cï¼šä¿®æ”¹æœç´¢å…³é”®è¯

```javascript
const result = await searchCommunities({
  city: 'å®šå…´å¿',
  query: 'ä½å®…',  // ğŸ‘ˆ æ”¹ä¸ºï¼šå°åŒºã€èŠ±å›­ã€å…¬å¯“ã€ä½å®…ç­‰
  pageSize: 20
})
```

---

## 3. å¸¸è§åœºæ™¯

### ğŸ˜ï¸ åœºæ™¯ 1ï¼šæœç´¢æŒ‡å®šåŸå¸‚çš„å°åŒº

```javascript
import { searchCommunities } from '@/services/baiduMapService'

// æœç´¢å®šå…´å¿çš„å°åŒº
const result = await searchCommunities({
  city: 'å®šå…´å¿',
  query: 'å°åŒº',
  pageSize: 20
})

console.log(`æ‰¾åˆ° ${result.length} ä¸ªå°åŒº`)
result.forEach(item => {
  console.log(`${item.name} - ${item.address}`)
})
```

### ğŸ“ åœºæ™¯ 2ï¼šæœç´¢é™„è¿‘çš„å°åŒº

```javascript
import { searchNearbyCommunities } from '@/services/baiduMapService'

// æœç´¢æŒ‡å®šåæ ‡é™„è¿‘ 5km å†…çš„å°åŒº
const result = await searchNearbyCommunities({
  lng: 115.808,     // ç»åº¦
  lat: 39.267,      // çº¬åº¦
  radius: 5000,     // åŠå¾„ï¼ˆç±³ï¼‰
  pageSize: 20
})

result.forEach(item => {
  console.log(`${item.name} - è·ç¦»ï¼š${item.distance}ç±³`)
})
```

### ğŸ—ºï¸ åœºæ™¯ 3ï¼šåœ°å€è½¬ç»çº¬åº¦

```javascript
import { getLocationByAddress } from '@/services/baiduMapService'

const location = await getLocationByAddress('å®šå…´å¿é‡‘å°è·¯88å·', 'å®šå…´å¿')

console.log(`ç»åº¦ï¼š${location.lng}`)
console.log(`çº¬åº¦ï¼š${location.lat}`)
```

### ğŸ“Œ åœºæ™¯ 4ï¼šç»çº¬åº¦è½¬åœ°å€

```javascript
import { getAddressByLocation } from '@/services/baiduMapService'

const addressInfo = await getAddressByLocation(115.808, 39.267)

console.log(`è¯¦ç»†åœ°å€ï¼š${addressInfo.address}`)
console.log(`çœä»½ï¼š${addressInfo.province}`)
console.log(`åŸå¸‚ï¼š${addressInfo.city}`)
```

### ğŸ“Š åœºæ™¯ 5ï¼šè·å–å°åŒºè¯¦æƒ…

```javascript
import { getCommunityDetail } from '@/services/baiduMapService'

const detail = await getCommunityDetail('é˜³å…‰å°åŒº', 'å®šå…´å¿')

console.log(`åç§°ï¼š${detail.name}`)
console.log(`åœ°å€ï¼š${detail.address}`)
console.log(`åæ ‡ï¼š${detail.lng}, ${detail.lat}`)
```

---

## 4. æ•…éšœæ’æŸ¥

### âŒ é—®é¢˜ 1ï¼šæ˜¾ç¤º "ç™¾åº¦åœ°å›¾ API æœªåŠ è½½"

**åŸå› ï¼š**
- ç½‘ç»œé—®é¢˜ï¼Œæ— æ³•åŠ è½½ç™¾åº¦åœ°å›¾è„šæœ¬
- API Key é”™è¯¯æˆ–å¤±æ•ˆ

**è§£å†³æ–¹æ¡ˆï¼š**

1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
3. éªŒè¯ API Keyï¼šè®¿é—® https://lbsyun.baidu.com/
4. å°è¯•æ›´æ¢ API Key

```html
<!-- åœ¨ index.html ä¸­æ›´æ¢ -->
<script src="https://api.map.baidu.com/api?v=3.0&ak=ä½ çš„æ–°KEY"></script>
```

### âŒ é—®é¢˜ 2ï¼šæœç´¢æ— ç»“æœ

**åŸå› ï¼š**
- åŸå¸‚åç§°é”™è¯¯
- å…³é”®è¯å¤ªå…·ä½“
- è¯¥åœ°åŒºæ•°æ®ä¸å…¨

**è§£å†³æ–¹æ¡ˆï¼š**

1. æ£€æŸ¥åŸå¸‚åç§°æ˜¯å¦æ­£ç¡®ï¼ˆå®Œæ•´åç§°ï¼Œå¦‚ "åŒ—äº¬å¸‚" è€Œä¸æ˜¯ "åŒ—äº¬"ï¼‰
2. ä½¿ç”¨æ›´å®½æ³›çš„å…³é”®è¯

```javascript
// å°è¯•å¤šä¸ªå…³é”®è¯
query: 'å°åŒº'      // âœ… æ¨è
query: 'ä½å®…'      // âœ… æ¨è
query: 'èŠ±å›­'      // âœ… æ¨è
query: 'é˜³å…‰å°åŒº'   // âŒ å¤ªå…·ä½“ï¼Œå¯èƒ½æ— ç»“æœ
```

3. æ‰©å¤§æœç´¢èŒƒå›´

```javascript
// ä½¿ç”¨é™„è¿‘æœç´¢ï¼Œæ‰©å¤§åŠå¾„
radius: 10000  // 10å…¬é‡Œ
```

### âŒ é—®é¢˜ 3ï¼šè‡ªåŠ¨ä½¿ç”¨å¤‡ç”¨æ•°æ®

**æ˜¾ç¤ºï¼š** "âš ï¸ ç™¾åº¦åœ°å›¾APIæœªåŠ è½½æˆ–æœç´¢å¤±è´¥ - å·²ä½¿ç”¨å¤‡ç”¨æ•°æ®"

**åŸå› ï¼š**
- API è¯·æ±‚å¤±è´¥ï¼ˆç½‘ç»œã€Keyç­‰é—®é¢˜ï¼‰
- è¿™æ˜¯æ­£å¸¸çš„å®¹é”™æœºåˆ¶

**è§£å†³æ–¹æ¡ˆï¼š**

è¿™ä¸å½±å“ç³»ç»Ÿä½¿ç”¨ï¼Œä½†å¦‚æœå¸Œæœ›ä½¿ç”¨çœŸå®æ•°æ®ï¼š

1. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹è¯¦ç»†é”™è¯¯
2. æ ¹æ®é”™è¯¯ä¿¡æ¯ä¿®å¤é—®é¢˜
3. åˆ·æ–°é¡µé¢é‡æ–°åŠ è½½

### âŒ é—®é¢˜ 4ï¼šCORS é”™è¯¯

**é”™è¯¯ä¿¡æ¯ï¼š** `Access to fetch at '...' from origin '...' has been blocked by CORS policy`

**åŸå› ï¼š**
- ç™¾åº¦åœ°å›¾ API çš„è·¨åŸŸé™åˆ¶
- éœ€è¦é…ç½®åŸŸåç™½åå•

**è§£å†³æ–¹æ¡ˆï¼š**

1. ç™»å½• [ç™¾åº¦åœ°å›¾å¼€æ”¾å¹³å°](https://lbsyun.baidu.com/)
2. è¿›å…¥"æ§åˆ¶å°" > "åº”ç”¨ç®¡ç†"
3. æ‰¾åˆ°ä½ çš„åº”ç”¨ï¼Œç‚¹å‡»"è®¾ç½®"
4. åœ¨"IPç™½åå•"æˆ–"åŸŸåç™½åå•"ä¸­æ·»åŠ  `localhost` æˆ–ä½ çš„åŸŸå

### âŒ é—®é¢˜ 5ï¼šåŠ è½½é€Ÿåº¦æ…¢

**åŸå› ï¼š**
- API è¯·æ±‚è¾ƒå¤š
- ç½‘ç»œå»¶è¿Ÿ

**è§£å†³æ–¹æ¡ˆï¼š**

1. å‡å°‘è¯·æ±‚æ•°é‡

```javascript
pageSize: 10  // ä» 20 æ”¹ä¸º 10
```

2. æ·»åŠ ç¼“å­˜æœºåˆ¶ï¼ˆå‚è€ƒ `docs/ç™¾åº¦åœ°å›¾APIä½¿ç”¨ç¤ºä¾‹.js` ä¸­çš„ `example8_SearchWithCache`ï¼‰

3. å»¶è¿ŸåŠ è½½

```javascript
// ç­‰å¾…é¡µé¢å…¶ä»–å†…å®¹åŠ è½½å®Œæˆåå†åŠ è½½å°åŒºæ•°æ®
setTimeout(() => {
  loadCommunities()
}, 2000)  // å»¶è¿Ÿ 2 ç§’
```

---

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½æ— æ³•è§£å†³é—®é¢˜ï¼š

1. **æŸ¥çœ‹å®Œæ•´æ–‡æ¡£**ï¼š
   - [ç™¾åº¦åœ°å›¾APIé›†æˆè¯´æ˜.md](./ç™¾åº¦åœ°å›¾APIé›†æˆè¯´æ˜.md)
   - [ç™¾åº¦åœ°å›¾APIä½¿ç”¨ç¤ºä¾‹.js](./ç™¾åº¦åœ°å›¾APIä½¿ç”¨ç¤ºä¾‹.js)

2. **æŸ¥çœ‹ç™¾åº¦åœ°å›¾å®˜æ–¹æ–‡æ¡£**ï¼š
   - [JavaScript API æ–‡æ¡£](https://lbsyun.baidu.com/index.php?title=jspopular3.0)
   - [Place API æ–‡æ¡£](https://lbsyun.baidu.com/index.php?title=jspopular3.0/guide/search)

3. **æµè§ˆå™¨æ§åˆ¶å°è°ƒè¯•**ï¼š
   - æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
   - æŸ¥çœ‹ Console æ ‡ç­¾é¡µçš„é”™è¯¯ä¿¡æ¯
   - æŸ¥çœ‹ Network æ ‡ç­¾é¡µçš„ç½‘ç»œè¯·æ±‚

4. **ç¤¾åŒºæ±‚åŠ©**ï¼š
   - [ç™¾åº¦åœ°å›¾å¼€å‘è€…è®ºå›](https://bbs.lbsyun.baidu.com/)
   - Stack Overflow

---

## âœ… ä¸‹ä¸€æ­¥

å®ŒæˆåŸºç¡€é›†æˆåï¼Œä½ å¯ä»¥ï¼š

1. â­ è‡ªå®šä¹‰æœç´¢å‚æ•°ï¼ˆåŸå¸‚ã€å…³é”®è¯ã€æ•°é‡ï¼‰
2. â­ æ·»åŠ ç¼“å­˜æœºåˆ¶æå‡æ€§èƒ½
3. â­ é›†æˆåˆ°å…¶ä»–ç»„ä»¶ä¸­
4. â­ æ·»åŠ åœ°å›¾å¯è§†åŒ–å±•ç¤º
5. â­ å®ç°å°åŒºæ•°æ®çš„å¢åˆ æ”¹æŸ¥

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰

